(this.webpackJsonppacman=this.webpackJsonppacman||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(4),c=n.n(i),d=(n(9),n(2)),r=(n.p,n(10),n(0));function x(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(),c=Object(d.a)(i,2),x=c[0],j=c[1],b=Object(a.useState)([]),o=Object(d.a)(b,2),f=o[0],O=o[1],u=Object(a.useState)(),l=Object(d.a)(u,2),h=l[0],v=l[1],m=Object(a.useState)([]),p=Object(d.a)(m,2),g=p[0],k=p[1],N=Object(a.useState)([]),S=Object(d.a)(N,2),I=S[0],M=S[1],y=Object(a.useState)(0),C=Object(d.a)(y,2),E=C[0],_=C[1],w=Object(a.useState)(),T=Object(d.a)(w,2),L=T[0],P=T[1],D=Object(a.useState)(),A=Object(d.a)(D,2),F=A[0],B=A[1],J=Object(a.useState)(Object(r.jsx)("div",{className:"wall"},F)),G=Object(d.a)(J,2),R=G[0],V=G[1],q=Object(a.useState)(),z=Object(d.a)(q,2),H=z[0],K=z[1],Q=Object(a.useState)(3),U=Object(d.a)(Q,2),W=U[0],X=U[1],Y=Object(a.useState)(0),Z=Object(d.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)(),ne=Object(d.a)(te,2),ae=ne[0],se=ne[1],ie=Object(a.useState)(),ce=Object(d.a)(ie,2),de=ce[0],re=ce[1],xe=Object(a.useState)(Object(r.jsx)("div",{className:"wall"},de)),je=Object(d.a)(xe,2),be=je[0],oe=je[1],fe=Object(a.useState)(),Oe=Object(d.a)(fe,2),ue=Oe[0],le=Oe[1],he=Object(a.useState)(3),ve=Object(d.a)(he,2),me=ve[0],pe=ve[1],ge=Object(a.useState)(0),ke=Object(d.a)(ge,2),Ne=ke[0],Se=ke[1],Ie=Object(a.useState)(1),Me=Object(d.a)(Ie,2),ye=Me[0],Ce=Me[1],Ee=Object(a.useState)(28),_e=Object(d.a)(Ee,2),we=_e[0];_e[1];Object(a.useLayoutEffect)((function(){function e(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var t=function(t){var n=[],a=15;n.push(15);for(var s=[-2,2,2*-we,2*+we,-3,3,3*-we,3*we],i=0;i<t;i++){var c=e(0,4);switch(-1!==n.indexOf(a+s[c])&&(c=e(0,8)),-1!==n.indexOf(a+s[c])&&(c=e(0,8)),c){case 0:a%we-1!==0&&(a-=1,n.push(a),a-=1,n.push(a));break;case 1:a%we<we-2&&(a+=1,n.push(a),a+=1,n.push(a));break;case 2:a-2*we>=0&&(a-=we,n.push(a),a-=we,n.push(a));break;case 3:a+2*we<we*we&&(a+=we,n.push(a),a+=we,n.push(a))}}for(var d=[],r=0;r<784;r++)-1!==n.indexOf(r)?d.push(0):d.push(1);return d.forEach((function(e,t){if(0==e){var n=0;0==d[t+1]&&n++,0==d[t-1]&&n++,0==d[t+28]&&n++,0==d[t-28]&&n++,n<1&&(d[t]=1)}})),d}(400),n=function(e){var t=[];return e.forEach((function(e,n){1===e&&t.push(n)})),t}(t);M(n),k(t);var a=[-1,1,we,-we];K(a[Math.floor(Math.random()*a.length)]),v("preparation")}),[]),Object(a.useLayoutEffect)((function(){if("preparation"===h){for(var e=0;e<300;e++)if(0==g[e]){P(e);break}for(var t=601;t<784;t++)if(0==g[t]){se(t);break}for(var a=301;a<500;a++)if(0==g[a]){s(a);break}O(function(){for(var e=[],t=0;t<g.length;t++)0===g[t]?e.push(Object(r.jsx)("div",{className:"pac-dot"},t)):1===g[t]&&e.push(Object(r.jsx)("div",{className:"wall"},t));return e[n]=Object(r.jsxs)("div",{className:"pac-man",children:[Object(r.jsx)("div",{className:"pacman_eye"}),Object(r.jsx)("div",{className:"pacman_mouth"})]},n),e[L]=Object(r.jsxs)("div",{className:"ghost",children:[Object(r.jsx)("div",{className:"left_eye"}),Object(r.jsx)("div",{className:"right_eye"})]},L),e[ae]=Object(r.jsxs)("div",{className:"ghost",children:[Object(r.jsx)("div",{className:"left_eye"}),Object(r.jsx)("div",{className:"right_eye"})]},ae),e}()),Ce(function(){for(var e=[],t=0;t<g.length;t++)0===g[t]&&e.push(t);return e}()),v("game")}else if("game"===h&&(n!==L&&n!==ae||v("game over"),f[F]=R,f[de]=be,V(f[L]),B(L),oe(f[ae]),re(ae),f[L]=Object(r.jsxs)("div",{className:"ghost",children:[Object(r.jsx)("div",{className:"left_eye"}),Object(r.jsx)("div",{className:"right_eye"})]},L),f[ae]=Object(r.jsxs)("div",{className:"ghost",children:[Object(r.jsx)("div",{className:"left_eye"}),Object(r.jsx)("div",{className:"right_eye"})]},ae),O(f),x!==n)){-1!==ye.indexOf(n)&&(ye.splice(ye.indexOf(n),1),Ce(ye)),f[x]=Object(r.jsx)("div",{},x),f[n]=Object(r.jsxs)("div",{className:"pac-man",children:[Object(r.jsx)("div",{className:"pacman_eye"}),Object(r.jsx)("div",{className:"pacman_mouth"})]},n),O(f)}})),Object(a.useLayoutEffect)((function(){if("game"===h){var e=function(e,t){var n=Math.floor(2*Math.random());var a=[-1,1,we,-we];function s(n){var s,i;e.steps!==e.stepsToChange?(t.setDirection(n),t.setSteps(e.steps+1)):e.steps===e.stepsToChange&&(t.setDirection(a[Math.floor(Math.random()*a.length)]),t.setStepToChange((s=2,i=3,s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s))+s)),t.setSteps(0))}switch(e.direction){case-1:if(e.index%we!==0&&-1==I.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}if(0===n&&e.index-we>=0&&-1==I.indexOf(e.index-we)){t.setIndex(e.index-we),s(-28);break}if(1===n&&e.index+we<we*we&&-1==I.indexOf(e.index+we)){t.setIndex(e.index+we),s(28);break}if(e.index%we<we-1&&-1==I.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}case-28:if(e.index-we>=0&&-1==I.indexOf(e.index-we)){t.setIndex(e.index-we),s(-28);break}if(0===n&&e.index%we<we-1&&-1==I.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}if(1===n&&e.index%we!==0&&-1==I.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}if(e.index+we<we*we&&-1==I.indexOf(e.index+we)){t.setIndex(e.index+we),s(28);break}case 1:if(e.index%we<we-1&&-1==I.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}if(0===n&&e.index-we>=0&&-1==I.indexOf(e.index-we)){t.setIndex(e.index-we),s(-28);break}if(1===n&&e.index+we<we*we&&-1==I.indexOf(e.index+we)){t.setIndex(e.index+we),s(28);break}if(e.index%we!==0&&-1==I.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}case 28:if(e.index+we<we*we&&-1==I.indexOf(e.index+we)){t.setIndex(e.index+we),s(28);break}if(0===n&&e.index%we<we-1&&-1==I.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}if(1===n&&e.index%we!==0&&-1==I.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}if(e.index-we>=0&&-1==I.indexOf(e.index-we)){t.setIndex(e.index-we),s(-28);break}default:t.setIndex(e.index),t.setDirection(a[Math.floor(Math.random()*a.length)])}},t={index:L,prevIndex:F,prevElem:R,direction:H,stepsToChange:W,steps:$},n={setIndex:P,setPrevIndex:B,setPrevElem:V,setDirection:K,setStepToChange:X,setSteps:ee},a={index:ae,prevIndex:de,prevElem:be,direction:ue,stepsToChange:me,steps:Ne},s={setIndex:se,setPrevIndex:re,setPrevElem:oe,setDirection:le,setStepToChange:pe,setSteps:Se},i=setInterval((function(){e(t,n),e(a,s)}),140);return function(){clearInterval(i)}}})),Object(a.useLayoutEffect)((function(){if("game"===h){var e=function(e){switch(e.keyCode){case 37:n%we!==0&&-1==I.indexOf(n-1)&&(j(n),s(n-1),_(E+1));break;case 38:n-we>0&&-1==I.indexOf(n-we)&&(j(n),s(n-we),_(E+1));break;case 39:n%we<we-1&&-1==I.indexOf(n+1)&&(j(n),s(n+1),_(E+1));break;case 40:n+we<we*we&&-1==I.indexOf(n+we)&&(j(n),s(n+we),_(E+1))}};return 0===ye.length&&v("game over"),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}));var Te,Le,Pe=function(e){switch(e.target.className){case"left":n%we!==0&&-1==I.indexOf(n-1)&&(j(n),s(n-1));break;case"up":n-we>0&&-1==I.indexOf(n-we)&&(j(n),s(n-we));break;case"right":n%we<we-1&&-1==I.indexOf(n+1)&&(j(n),s(n+1));break;case"down":n+we<we*we&&-1==I.indexOf(n+we)&&(j(n),s(n+we))}};return"game over"!==h?(Te=Object(r.jsx)("div",{className:"grid",children:f}),Le=Object(r.jsxs)("div",{className:"movement_buttons",children:[Object(r.jsx)("button",{className:"up",onClick:function(e){return Pe(e)},children:"\u2191"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"left",onClick:function(e){return Pe(e)},children:"\u2190"}),Object(r.jsx)("button",{className:"down",onClick:function(e){return Pe(e)},children:"\u2193"}),Object(r.jsx)("button",{className:"right",onClick:function(e){return Pe(e)},children:"\u2192"})]})]})):"game over"===h&&(Te=Object(r.jsx)("div",{children:"GAME OVER"})),Object(r.jsxs)("div",{className:"game",children:[Te,Object(r.jsxs)("div",{className:"game_data",children:["remain: ",ye.length]}),Le]})}var j=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"PACMAN"}),Object(r.jsx)(x,{})]})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(j,{})}),document.getElementById("root")),b()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.f6755304.chunk.js.map