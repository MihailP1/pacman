(this.webpackJsonppacman=this.webpackJsonppacman||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(4),c=n.n(i),d=(n(9),n(2)),r=(n.p,n(10),n(1));function x(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(),c=Object(d.a)(i,2),x=c[0],b=c[1],o=Object(a.useState)([]),j=Object(d.a)(o,2),O=j[0],f=j[1],u=Object(a.useState)(),h=Object(d.a)(u,2),l=h[0],p=h[1],v=Object(a.useState)([]),m=Object(d.a)(v,2),g=m[0],S=m[1],k=Object(a.useState)([]),I=Object(d.a)(k,2),N=I[0],C=I[1],M=Object(a.useState)(0),y=Object(d.a)(M,2),T=y[0],_=y[1],w=Object(a.useState)(),E=Object(d.a)(w,2),L=E[0],P=E[1],D=Object(a.useState)(),A=Object(d.a)(D,2),F=A[0],B=A[1],J=Object(a.useState)(1),G=Object(d.a)(J,2),R=G[0],V=G[1],q=Object(a.useState)(3),z=Object(d.a)(q,2),H=z[0],K=z[1],Q=Object(a.useState)(0),U=Object(d.a)(Q,2),W=U[0],X=U[1],Y=Object(a.useState)(),Z=Object(d.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)(),ne=Object(d.a)(te,2),ae=ne[0],se=ne[1],ie=Object(a.useState)(1),ce=Object(d.a)(ie,2),de=ce[0],re=ce[1],xe=Object(a.useState)(3),be=Object(d.a)(xe,2),oe=be[0],je=be[1],Oe=Object(a.useState)(0),fe=Object(d.a)(Oe,2),ue=fe[0],he=fe[1],le=Object(a.useState)(),pe=Object(d.a)(le,2),ve=pe[0],me=pe[1],ge=Object(a.useState)(),Se=Object(d.a)(ge,2),ke=Se[0],Ie=Se[1],Ne=Object(a.useState)(1),Ce=Object(d.a)(Ne,2),Me=Ce[0],ye=Ce[1],Te=Object(a.useState)(3),_e=Object(d.a)(Te,2),we=_e[0],Ee=_e[1],Le=Object(a.useState)(0),Pe=Object(d.a)(Le,2),De=Pe[0],Ae=Pe[1],Fe=Object(a.useState)(),Be=Object(d.a)(Fe,2),Je=Be[0],Ge=Be[1],Re=Object(a.useState)(),Ve=Object(d.a)(Re,2),qe=Ve[0],ze=Ve[1],He=Object(a.useState)(1),Ke=Object(d.a)(He,2),Qe=Ke[0],Ue=Ke[1],We=Object(a.useState)(3),Xe=Object(d.a)(We,2),Ye=Xe[0],Ze=Xe[1],$e=Object(a.useState)(0),et=Object(d.a)($e,2),tt=et[0],nt=et[1],at=Object(a.useState)(1),st=Object(d.a)(at,2),it=st[0],ct=st[1],dt=Object(a.useState)(28),rt=Object(d.a)(dt,2),xt=rt[0];rt[1];Object(a.useLayoutEffect)((function(){function e(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var t=function(t){var n=[],a=15;n.push(15);for(var s=[-2,2,2*-xt,2*+xt,-3,3,3*-xt,3*xt],i=0;i<t;i++){var c=e(0,4);switch(-1!==n.indexOf(a+s[c])&&(c=e(0,8)),-1!==n.indexOf(a+s[c])&&(c=e(0,8)),c){case 0:a%xt-1!==0&&(a-=1,n.push(a),a-=1,n.push(a));break;case 1:a%xt<xt-2&&(a+=1,n.push(a),a+=1,n.push(a));break;case 2:a-2*xt>=0&&(a-=xt,n.push(a),a-=xt,n.push(a));break;case 3:a+2*xt<xt*xt&&(a+=xt,n.push(a),a+=xt,n.push(a))}}for(var d=[],r=0;r<784;r++)-1!==n.indexOf(r)?d.push(0):d.push(1);return d.forEach((function(e,t){if(0===e){var n=0;0===d[t+1]&&n++,0===d[t-1]&&n++,0===d[t+28]&&n++,0===d[t-28]&&n++,n<1&&(d[t]=1)}})),d}(400),n=function(e){var t=[];return e.forEach((function(e,n){1===e&&t.push(n)})),t}(t);C(n),S(t);var a=[-1,1,xt,-xt];V(a[Math.floor(Math.random()*a.length)]),p("preparation")}),[]),Object(a.useLayoutEffect)((function(){if("preparation"===l){for(var e=0;e<200;e++)if(0===g[e]){P(e);break}for(var t=400;t>201;t--)if(0===g[t]){ee(t);break}for(var a=401;a<600;a++)if(0===g[a]){me(a);break}for(var i=g.length;i>601;i--)if(0===g[i]){Ge(i);break}for(var c=301;c<500;c++)if(0===g[c]){s(c);break}f(function(){for(var e=[],t=0;t<g.length;t++)0===g[t]?e.push(Object(r.jsx)("div",{className:"pac-dot"},t)):1===g[t]&&e.push(Object(r.jsx)("div",{className:"wall"},t));function a(t){e[t]=Object(r.jsxs)("div",{className:"ghost",children:[Object(r.jsx)("div",{className:"left_eye"}),Object(r.jsx)("div",{className:"right_eye"})]},t)}return e[n]=Object(r.jsxs)("div",{className:"pac-man",children:[Object(r.jsx)("div",{className:"pacman_eye"}),Object(r.jsx)("div",{className:"pacman_mouth"})]},n),a(L),a($),a(ve),a(Je),e}()),ct(function(){for(var e=[],t=0;t<g.length;t++)0===g[t]&&e.push(t);return e}()),p("game")}else if("game"===l){var d=function(e){-1!==it.indexOf(e.prevIndex)?O[e.prevIndex]=Object(r.jsx)("div",{className:"pac-dot"},e.prevIndex):-1===it.indexOf(e.prevIndex)&&(O[e.prevIndex]=Object(r.jsx)("div",{},e.prevIndex)),e.setPrevIndex(e.index),O[e.index]=Object(r.jsxs)("div",{className:"ghost",children:[Object(r.jsx)("div",{className:"left_eye"}),Object(r.jsx)("div",{className:"right_eye"})]},e.index)};n!==L&&n!==$&&n!==ve&&n!==Je||p("game over");var b={index:$,prevIndex:ae,setPrevIndex:se},o={index:ve,prevIndex:ke,setPrevIndex:Ie},j={index:Je,prevIndex:qe,setPrevIndex:ze};if(d({index:L,prevIndex:F,setPrevIndex:B}),d(b),d(o),d(j),f(O),x!==n){-1!==it.indexOf(n)&&(it.splice(it.indexOf(n),1),ct(it)),O[x]=Object(r.jsx)("div",{},x),O[n]=Object(r.jsxs)("div",{className:"pac-man",children:[Object(r.jsx)("div",{className:"pacman_eye"}),Object(r.jsx)("div",{className:"pacman_mouth"})]},n),f(O)}}})),Object(a.useLayoutEffect)((function(){if("game"===l){var e=function(e,t){var n=Math.floor(2*Math.random());var a=[-1,1,xt,-xt];function s(n){var s,i;e.steps!==e.stepsToChange?(t.setDirection(n),t.setSteps(e.steps+1)):e.steps===e.stepsToChange&&(t.setDirection(a[Math.floor(Math.random()*a.length)]),t.setStepToChange((s=2,i=3,s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s))+s)),t.setSteps(0))}switch(e.direction){case-1:if(e.index%xt!==0&&-1==N.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}if(0===n&&e.index-xt>=0&&-1==N.indexOf(e.index-xt)){t.setIndex(e.index-xt),s(-28);break}if(1===n&&e.index+xt<xt*xt&&-1==N.indexOf(e.index+xt)){t.setIndex(e.index+xt),s(28);break}if(e.index%xt<xt-1&&-1==N.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}case-28:if(e.index-xt>=0&&-1==N.indexOf(e.index-xt)){t.setIndex(e.index-xt),s(-28);break}if(0===n&&e.index%xt<xt-1&&-1==N.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}if(1===n&&e.index%xt!==0&&-1==N.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}if(e.index+xt<xt*xt&&-1==N.indexOf(e.index+xt)){t.setIndex(e.index+xt),s(28);break}case 1:if(e.index%xt<xt-1&&-1==N.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}if(0===n&&e.index-xt>=0&&-1==N.indexOf(e.index-xt)){t.setIndex(e.index-xt),s(-28);break}if(1===n&&e.index+xt<xt*xt&&-1==N.indexOf(e.index+xt)){t.setIndex(e.index+xt),s(28);break}if(e.index%xt!==0&&-1==N.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}case 28:if(e.index+xt<xt*xt&&-1==N.indexOf(e.index+xt)){t.setIndex(e.index+xt),s(28);break}if(0===n&&e.index%xt<xt-1&&-1==N.indexOf(e.index+1)){t.setIndex(e.index+1),s(1);break}if(1===n&&e.index%xt!==0&&-1==N.indexOf(e.index-1)){t.setIndex(e.index-1),s(-1);break}if(e.index-xt>=0&&-1==N.indexOf(e.index-xt)){t.setIndex(e.index-xt),s(-28);break}}},t={index:L,direction:R,stepsToChange:H,steps:W},n={setIndex:P,setDirection:V,setStepToChange:K,setSteps:X},a={index:$,direction:de,stepsToChange:oe,steps:ue},s={setIndex:ee,setDirection:re,setStepToChange:je,setSteps:he},i={index:ve,direction:Me,stepsToChange:we,steps:De},c={setIndex:me,setDirection:ye,setStepToChange:Ee,setSteps:Ae},d={index:Je,direction:Qe,stepsToChange:Ye,steps:tt},r={setIndex:Ge,setDirection:Ue,setStepToChange:Ze,setSteps:nt},x=setInterval((function(){e(t,n),e(a,s),e(i,c),e(d,r)}),100);return function(){clearInterval(x)}}})),Object(a.useLayoutEffect)((function(){if("game"===l){var e=function(e){switch(e.keyCode){case 37:n%xt!==0&&-1===N.indexOf(n-1)&&(b(n),s(n-1),_(T+1));break;case 38:n-xt>0&&-1===N.indexOf(n-xt)&&(b(n),s(n-xt),_(T+1));break;case 39:n%xt<xt-1&&-1===N.indexOf(n+1)&&(b(n),s(n+1),_(T+1));break;case 40:n+xt<xt*xt&&-1===N.indexOf(n+xt)&&(b(n),s(n+xt),_(T+1))}};return 0===it.length&&p("game over"),document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}}));var bt,ot,jt=function(e){switch(e.target.className){case"left":n%xt!==0&&-1===N.indexOf(n-1)&&(b(n),s(n-1));break;case"up":n-xt>0&&-1===N.indexOf(n-xt)&&(b(n),s(n-xt));break;case"right":n%xt<xt-1&&-1===N.indexOf(n+1)&&(b(n),s(n+1));break;case"down":n+xt<xt*xt&&-1===N.indexOf(n+xt)&&(b(n),s(n+xt))}};return"game over"!==l?(bt=Object(r.jsx)("div",{className:"grid",children:O}),ot=Object(r.jsxs)("div",{className:"movement_buttons",children:[Object(r.jsx)("button",{className:"up",onClick:function(e){return jt(e)},children:"\u2191"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"left",onClick:function(e){return jt(e)},children:"\u2190"}),Object(r.jsx)("button",{className:"down",onClick:function(e){return jt(e)},children:"\u2193"}),Object(r.jsx)("button",{className:"right",onClick:function(e){return jt(e)},children:"\u2192"})]})]})):"game over"===l&&(bt=Object(r.jsx)("div",{children:"GAME OVER"})),Object(r.jsxs)("div",{className:"game",children:[bt,Object(r.jsxs)("div",{className:"game_data",children:["remain: ",it.length]}),Object(r.jsx)("button",{className:"change_map_button",onClick:function(){return window.location.reload()},children:"change map"}),ot]})}var b=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"PACMAN"}),Object(r.jsx)(x,{})]})},o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(b,{})}),document.getElementById("root")),o()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.b49db7b5.chunk.js.map